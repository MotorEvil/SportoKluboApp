@model SportoKluboApp.Models.ViewModels.TreniruotesViewModel
@using Humanizer

@{
    ViewData["Title"] = "Treniruotes";
}

<div class="panel panel-default todo-panel">
    <div class="panel-heading">@ViewData["Title"]</div>

    <table class="table table-hover" id="aa">
        <thead>
            <tr>
                <td> </td>
                <td>Laikas</td>
                <td>Pavadinimas</td>
                <td>Laisvu vietu skaicius</td>
                <td>Dalyviu skaicius</td>
            </tr>
        </thead>

        @foreach (var item in Model.Treniruotes)
        {
    <tr id="bb">
        <td>
            <input type="hidden" name="id" value="@item.Id">
        </td>
        <td>@item.Laikas</td>
        <td>@item.Pavadinimas</td>
        <td>@item.LaisvosVietos</td>
        <td>@item.Registracijos</td>
        <td>
            @if (item.LaisvosVietos == item.Registracijos)
            {
                <label>Treniruote pilna!</label>
            }

            @if (item.TreniruotesDalyviai.Contains(User.Identity.Name))
            {
                <form id="Exit" asp-controller="Treniruotes" asp-action="ExitTreniruote" method="post">
                    <input type="submit" value="Exit" class="join-button" />
                    <input type="hidden" name="id" value="@item.Id">
                </form>
            }

            else
            {
                <form id="Join" asp-controller="Treniruotes" asp-action="JoinTreniruote" method="post">
                    <input type="submit" value="Join" class="join-button" />
                    <input type="hidden" name="id" value="@item.Id">
                </form>
            }
        </td>
    </tr>
        }
    </table>

    <div class="panel-footer add-item-form">
        @await Html.PartialAsync("AddTreniruotePartial", new Treniruote())
    </div>
</div>